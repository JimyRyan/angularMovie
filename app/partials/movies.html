<header class="page-header">
    <h1>Ma vidéothèque <small>{{movies.length}} films</small>
        <button class="btn btn-primary" data-toggle="modal" data-target="#movie-form-modal">Ajouter un film</button>
    </h1>
</header>

<ul class="thumbnails">
    <li ng-repeat="movie in movies" class="span12">
        <img ng-src="{{movie.poster}}" class="span2">
        <div class="caption">
            <h3>{{movie.title}}
                <button class="btn btn-danger" ng-click="deleteMovie($index)"><i class="icon-trash icon-white"></i></button>
                <a class="btn btn-info" href="#/movies/edit/{{movie.id}}"><i class="icon-edit icon-white"></i></a>
            </h3>
            <p><b>Année de sortie : </b>{{movie.releaseYear}}</p>
            <p><b>Réalisateur : </b>{{movie.directors}}</p>
            <p><b>Acteurs : </b>{{movie.actors}}</p>
            <p><b>Synopsis : </b>{{movie.synopsis}}</p>
            <p><b>Vu le : </b> {{movie.lastViewDate}}</p>
            <p><b>Prix : </b> {{movie.price}}</p>
            <p><b>Note : </b> {{movie.rate}}</p>
        </div>
    </li>
</ul>


<!-- formulaire de création - caché par défaut -->
<div id="movie-form-modal" class="modal hide fade" ng-controller="movieFormController">
    <header class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Ajouter un film</h3>
    </header>
    <section class="modal-body">
        <form class="form-horizontal" novalidate name="myForm">
            <div class="control-group" ng-class="{ error : myForm.title.$error.required && myForm.title.$dirty }">
                <label class="control-label">Titre :</label>
                <input type="text" ng-model="movie.title" name="title" required>
                <div class="controls" ng-show=" myForm.title.$error.required && myForm.title.$dirty"><span class="help-block">Veillez saisir un titre</span></div>
            </div>
            <div class="control-group">
                <label class="control-label">Année de sortie :</label>
                <input type="text" ng-model="movie.releaseYear">
            </div>
            <div class="control-group">
                <label class="control-label">Réalisateur : </label>
                <input type="text" ng-model="movie.directors">
            </div>
            <div class="control-group">
                <label class="control-label">Acteurs :</label>
                <input type="text" ng-model="movie.actors">
            </div>
            <div class="control-group">
                <label class="control-label">Synopsis :</label>
                <textarea ng-model="movie.synopsis"></textarea>
            </div>
            <div class="control-group" ng-class="{ error : (myForm.rate.$error.$invalid) && myForm.title.$dirty }">
                <label class="control-label">Note :</label>
                <input type="number" placeholder="entre 1 et 5" ng-model="movie.rate" name="rate" min="1" max="5">
                <div class="controls" ng-show=" (myForm.rate.$error.min) && myForm.rate.$dirty"><span class="help-block">La note doit être comprise entre >= 1</span></div>
                <div class="controls" ng-show=" (myForm.rate.$error.max) && myForm.rate.$dirty"><span class="help-block">La note doit être comprise entre <= 5</span></div>            </div>
        </form>
    </section>
    <footer class="modal-footer">
        <button data-dismiss="modal" class="btn btn-danger btn-small">Annuler</button>
        <button data-dismiss="modal" class="btn btn-success" ng-click="addMovie(movie)" ng-disabled=" myForm.$invalid ">Ajouter</button>
    </footer>
</div>
